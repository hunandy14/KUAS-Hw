/**********************************************************
Name : OpenRaw 2.2
Date : 2016/08/04
By   : CharlotteHonG
Final: 2016/08/25
**********************************************************/
#ifndef OPEN_RAW
#define OPEN_RAW


#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <iomanip>
#include <sstream>
#include <ctime>
#include <cmath>

using namespace std;
typedef unsigned char imch;

namespace imr{
    class ImrSize{
    public:
        ImrSize(int y, int x);
        int width;
        int high;
    };

    class imgraw {
    public:
        imgraw(ImrSize size);
        void read(string filename);
        void write(string filename);
        imch point_read(int y, int x);
        void point_write(int y, int x, imch value);
        void resize_canvas(ImrSize size);
        int w();
        int h();
        void pri_htg(string title);
        // 新增
        void salt_pepper(unsigned int white,
            unsigned int black);
        imch** getMask(int oy, int ox,
            ImrSize size, int sy, int sx);
        void low_pass(ImrSize size);
        void median_filter(ImrSize size);
        void gaussian(double dev);
    private:
        ifstream::pos_type filesize;
        string filename;
        vector<imch> img_data;
        int width;
        int high;
        imch max;
        imch min;
        int htg_data[255];
        void histogram();
        void extremum();
        // 新增
        int rand_int(int low, int up);
        void sort(imch arr[], int len);
    };

    #include "Noise.cpp"
};



#endif